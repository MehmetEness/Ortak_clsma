{% extends "base.html" %}
{% load static %}
{% block css_files %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css'>
<link rel="stylesheet" type="text/css" href="{% static 'projects_styles.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">
<link rel="stylesheet" href="{% static 'dist/mc-calendar.min.css' %}" />
{% endblock %}
{% block title %} Projects {% endblock %}
{% block content %}
 <div class="body-div"> 
    
    
    {% include 'partials/_left_nav_bar.html' %}
    <div class="right-menu">
      <div class="top-menu">
          <div class="menu-icon">
          </div>
        <div class="content">
          <button class="button1">Sırala</button>
          <button class="button1">Filitrele</button>
          <div class="search">
              <div class="icon"></div>
              <div class="input">
                <input id="mysearch" type="text" placeholder="Ara">
            </div>
            <span class="clear" onclick="document.getElementById('mysearch').value = ''"></span>
         </div>
      </div>
      <div class="fonction-butons">
         <a href="{% url 'income_add' %}"><button class="button2" >Gelir</button></a>
         <a href="{% url 'expenses_add' %}"><button class="button2" >Yapılan Ödeme</button></a>
         <a href="{% url 'jobhistory_add' %}"><button class="button2" >Yapılan İş</button></a>
         <a href="{% url 'project_add' %}"><button class="button-project-start" >Proje Başlat</button></a>
      </div>
   </div>
   <div class="lists">
      <div class="line"></div>
      <table id="table" class="table table-sortable">
         <thead>
            <th scope="col">Proje Adı</th>
            <th scope="col">Konum</th>
            <th scope="col">Güç</th>
            <th scope="col">İş Bedeli</th>
            <th scope="col">Arazi/Çatı</th>
            <th scope="col">Tarih</th>
            <th scope="col">Durum</th>
         </thead>
         <tbody>
            {% for x in project %}
            {% include 'partials/_table-row.html' %}
            {% endfor %}
         </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
</div>
</div>
{% block js_files %} 
<script src="{% static 'project.js' %}"></script> 
<script src="{% static 'dist/mc-calendar.min.js' %}"></script> 
<script>
   document.addEventListener("DOMContentLoaded", function () {
  
  var numericCells = document.querySelectorAll('tr td:nth-child(4)');  
  numericCells.forEach(function (cell) {
   var numericValue = parseFloat(cell.textContent.replace(/[^\d.-]/g, ''));

   if (!isNaN(parseFloat(numericValue))) {
      cell.textContent = formatNumber(numericValue) + "$";
      console.log(formatNumber(numericValue) + "$");
  } else {
   cell.textContent = "0$"
  }
   
});
});

function formatNumber(number) {
return new Intl.NumberFormat('en-US', { maximumFractionDigits: 4 }).format(number.toFixed(4));
}
</script>
{% endblock %}
{% endblock %}